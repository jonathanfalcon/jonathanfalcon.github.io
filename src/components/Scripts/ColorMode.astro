---

---

<script is:inline>
    // Used to update current color mode
    const setCurrentMode = (mode) =>
        document.documentElement.classList.toggle('dark', mode === 'dark')

    // Replicates dynamic changes in system mode
    const handleSystemModeChange = ({ matches }) => setCurrentMode(matches ? 'dark' : 'light')

    // Used for monitoring current color mode if mode is 'system'
    const systemMode = window.matchMedia('(prefers-color-scheme: dark)')

    // Sets current mode on page load
    setCurrentMode(localStorage.mode || (systemMode.matches ? 'dark' : 'light'))

    // Adds `systemMode` event listener if `mode` in `localStorage` is falsy
    !localStorage.mode && systemMode.addEventListener('change', handleSystemModeChange)

    // Used for updating color mode from `<select>`
    const setColorMode = (mode) => {
        if (mode === 'system') {
            // Removes `mode` from `localStorage`
            localStorage.removeItem('mode')

            // Checks current system mode and updates page accordingly
            setCurrentMode(systemMode.matches ? 'dark' : 'light')

            // Adds `systemMode` event listener
            systemMode.addEventListener('change', handleSystemModeChange)
        } else {
            // Updates `mode` in `localStorage`
            localStorage.mode = mode

            // Updates current color mode
            setCurrentMode(mode)

            // Removes `systemMode` event listener
            systemMode.removeEventListener('change', handleSystemModeChange)
        }
    }

    // Gets current color mode
    const getCurrentMode = () => localStorage.mode || 'system'
</script>
